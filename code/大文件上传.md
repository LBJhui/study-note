# 大文件上传

## 背景

背景作为佐证，不像是在网上抄来的

经常遇到一些问题：

- 网络断开之后，之前传的没了
- 传者传者，网络波动了，结果啥都没了
- 关机了，想接着传，做不到

专业术语

- 断点续传
- 断开重连重传
- 切片上传

## 方案

- 前端切片 chunk
- 将切片传递给后端，切的片要取名：hash，index
- 后端组合切片

给面试官加料

- 前端切片：主进程卡顿，web-worker 多线程切片，处理完后交给主进程发送
- 切完后，将 blob 存储到 indexDB，下次用户进来之后，嗅探一下是否存在未完成上传的切片，有就尝试继续上传
- websocket，实时通知，和请求序列的控制 wss
- 整体说一说我主导这个大文件上传器整体设计
  - 组件设计
  - props、事件、状态
  - 拖拽上传、多文件选择
  - 通用化不同文件的上传，上传统一协议

## 反思和优化
