<script language="JavaScript">
  function drag(obj) {
    var s = obj.style
    var b = document.body
    var x = event.clientX + b.scrollLeft - s.pixelLeft
    var y = event.clientY + b.scrollTop - s.pixelTop
    var m = function () {
      if (event.button == 1) {
        s.pixelLeft = event.clientX + b.scrollLeft - x
        s.pixelTop = event.clientY + b.scrollTop - y
      } else document.detachEvent('onmousemove', m)
    }
    document.attachEvent('onmousemove', m)

    if (!this.z) this.z = 999
    s.zIndex = ++this.z
    event.cancelBubble = true
  }
</script>

<body ondragstart="return false" style="margin: 0px">
  <div
    onmousedown="drag(this)"
    style="
      left: 250px;
      position: absolute;
      width: 300px;
      height: 300px;
      background: #000;
    "
  >
    <div
      onmousedown="drag(this)"
      style="
        top: 100px;
        position: absolute;
        width: 100px;
        height: 100px;
        background: #f0f;
      "
    ></div>
    <div
      onmousedown="drag(this)"
      style="
        top: 150px;
        position: absolute;
        width: 100px;
        height: 100px;
        background: #f00;
      "
    ></div>
    <div
      onmousedown="drag(this)"
      style="
        left: 100px;
        position: absolute;
        width: 100px;
        height: 100px;
        background: #0f0;
      "
    ></div>
    <div
      onmousedown="drag(this)"
      style="
        left: 150px;
        position: absolute;
        width: 100px;
        height: 100px;
        background: #00f;
      "
    ></div>
  </div>
</body>
